



1) 

- tâches coding  --> TODO finir selon les réponses de stiive

- relire vault/vaultmanager et la partie maxborrow + accrueinterests

     - notes: getVaultBalance/getVaultBalanceNoDebt renvoient la même valeur quand la liquidité est locked
     --> confirmer qu'il n'y a pas de cas ou ça pose probleme (lock ou pas lock la valeur devrait être différente)

     - vault à partir de buyCtoken --> documenter/cleaner le code dans vault et dans lending contracts!!

2) tests

- oracle
- printer
- retester vault
- retester lending

3) revoir mes questions non répondues à Stiive

****************************** TASKS ************************************************

** coding


          ** call VM.accrueinterest a chaque mint/burn de nuasset
          OK
          ** call VM.accrueinterest à chaque chgt de balance du vault
               TODO si globlCF only, call vaultmanager accrueInterest + add the call in  repay/borrow as we change

--> mettre à jour le code quand stiive m'aura repondu sur le multi vault

--> are we sure it's enough (we should do it also when nuasset price changes)

--> todo si globalCF, maxCF global aussi?


- revoir le maxborrow, il n'utilise que lea balance du vault

- tout relire, printer, vault, vaultmanager, remettre des interfaces quand possible

     - passer les nuassets en non upgradable?


	- check int56(int32( cast


- virer les fichiers unused

** divers


- numaoracle les arrondis ceiling etc... voir si tout est correct dans les 2 sens


- numaprinter: onpourrait reecrire la façon dont sont gérer les fees, pas très clair

- DOC --> si pas de doc et nouveaux features ajoutés 1 jour avant, sans test, c'est uen perte de temps de faire l'audit

     ** lister les trucs à documenter
           ** leverage comment ça marche avec le flashloan
           ** liquidations
           ** les differents CF et ce qui se passe selon

** tests numa printer/numa oracle

- arbi fork

- retester vault
- retester lending

- Autre fonctionnalités
- synth swaps + no scaling/noblocking

- refacto tests: fixtures: printer, vault, lending
         

         - refaire numaOracle

         - voir si besoin de refaire numaPrinter test, à minima le passer sur arbifork

         - verifier que numaOracle/numaPrinter est exhaustif

         - faire des fonctions d'init séparées: printer, vault, comp
         
         - à la fin il faudra ces tests là:
               - numa token
               - printer
               - oracle
               - vault
               - lending
               - synthetics swaps
          -  clip to numa VM price
     DONE: todo: check code, test code


- tester la wl de fees

** questions
- only 1 vault can leverage? + voir si ça simplifie

- Vault 2.0 combine staking reward pools (vault fees + LST yield collected in one address)               
--> what do you mean and why

- global CF ok?


-  Numa LP oracle pricing (for minting synthetics) clipped to vault buy/sell price.

--> right now this is reverting (cf telegram msg) and i use vault price no fees + tolerance

- CF for max borrowable amount (excludes borrowed rEth) & CF to block minting& scale nuAsset are the same?

--> (total Eth balance on all vaults - borrowed Eth from all vaults) / total synth value?

or shpuld we have 2 different CF 

** Notes Stiive





** deploy scripts




